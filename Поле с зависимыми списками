{"uid":"ula17zj8adwubbawb9qa","className":"WidgetField","data":{"datamix":{"nodebg":"4.2","widgetpaddings":"4.2","widgetborders":"4.2","widgetshadow":"4.2","widgetfx":"4.2","widgetparameters":"4.2","widgetadaptive":"4.2","metahtml":"4.2","repeater":"4.2"},"style":{"handlers":"style","vals":{"bgType":"clear","bgImage":{"datamix":{"img":"4.2"},"quality":8,"source":"upload","resize":true,"legacy_color":[0.55,1,0.5],"legacy_pack":"bg-tech","blur":{"enable":true,"size":16},"source_id":"","variable_id":"","file":"//static.creatium.io/img/bg-tech/1.jpg","size":[1600,1046]},"bgImage_Attach":false,"bgImage_Size":"cover","bgImage_Repeat":"repeat","bgImage_Valign":"center","bgImage_Halign":"center","bgVideo_Source":"youtube","bgVideo_Youtube":"http://www.youtube.com/watch?v=3oem-M2tQU4","bgVideo_YoutubeImageSource":"youtube","bgVideo_YoutubeImage":{"datamix":{"img":"4.2"},"quality":8,"source":"upload","resize":true,"legacy_color":[0,1,0.5,1],"legacy_pack":"users","blur":{"enable":true,"size":16},"source_id":"","variable_id":"","file":"http://img.youtube.com/vi/3oem-M2tQU4/maxresdefault.jpg","size":[1920,1080]},"bgVideo_Mp4":"//static.creatium.io/bgvideo/island.mp4","bgVideo_Webm":"//static.creatium.io/bgvideo/island.webm","bgVideo_Ogv":"//static.creatium.io/bgvideo/island.ogv","bgVideo_DirectImage":{"datamix":{"img":"4.2"},"quality":8,"source":"upload","resize":true,"legacy_color":[0,1,0.5,1],"legacy_pack":"users","blur":{"enable":true,"size":16},"source_id":"","variable_id":"","file":"//static.creatium.io/bgvideo/island.jpg","size":[1280,720]},"bgVideo_Sound":false,"bgColor":{"datamix":{"color":"4.2"},"data":[1,1,1,1],"global":{"id":0,"transform":[]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"global"},"bgColor_Alpha":0.25,"bgColor_Bright":0,"bgBright":-0.5,"bgGradientDirection":"to bottom","bgGradientColor1":{"datamix":{"color":"4.2"},"data":[1,1,1,1],"global":{"id":0,"transform":[]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"global"},"bgGradientColor1_Alpha":0.8,"bgGradientColor2":{"datamix":{"color":"4.2"},"data":[1,1,1,1],"global":{"id":0,"transform":[]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"global"},"bgGradientColor2_Alpha":0.2,"bgGradientCode":"linear-gradient(90deg, rgba(195,40,34,1) 0%, rgba(222,224,96,1) 50%, rgba(45,253,235,1) 100%)","bgGradientColorside":"dec","bgParticlesShapeParticle":"circle","bgParticlesColorParticle":{"datamix":{"color":"4.2"},"data":[1,1,1,1],"global":{"id":0,"transform":[]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"parent":{"type":"frontcolor"}},"bgParticlesOpacityParticle":1,"bgParticlesNumberParticle":80,"bgParticlesSizeParticle":5,"bgParticlesLink":true,"bgParticlesLinkDistance":150,"bgParticlesMoveState":true,"bgParticlesMoveSpeed":2,"bgParticlesMoveDirection":"none","bgParticlesMoveOutMode":"out","bgParticlesInteractHoverState":false,"bgParticlesInteractHoverType":"grab","bgParticlesInteractHoverGrabDistance":250,"bgParticlesInteractHoverGrabOpacity":0.8,"bgParticlesInteractHoverRepulseDistance":150,"bgParticlesInteractHoverBubbleDistance":150,"bgParticlesInteractHoverBubbleSize":10,"bgParticlesInteractClickState":false,"bgParticlesInteractClickType":"push","bgParticlesInteractClickCount":2,"padTop_x_all":5,"padTop_x_md":null,"padTop_x_sm":null,"padTop_x_xs":null,"padBottom_x_all":5,"padBottom_x_md":null,"padBottom_x_sm":null,"padBottom_x_xs":null,"padLeft_x_all":10,"padLeft_x_md":null,"padLeft_x_sm":null,"padLeft_x_xs":null,"padRight_x_all":10,"padRight_x_md":null,"padRight_x_sm":null,"padRight_x_xs":null,"borderWidth":3,"borderRadius":0,"borderStyle":"none","borderColor":{"datamix":{"color":"4.2"},"data":[1,1,1,1],"global":{"id":0,"transform":[]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"parent","parent":{"type":"frontcolor"}},"shadow":false,"shadowInset":false,"shadowX":0,"shadowY":2,"shadowBlur":5,"shadowScale":0,"shadowColor":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"self"},"shadowAlpha":0.5,"wow":false,"wowType":"fadeIn","wowDelay":0,"hover":false,"hoverType":"hvr-grow-mini","id":{"datamix":{"ast":"4.2"},"children":[{"type":"Code","code":""}]},"classes":{"datamix":{"ast":"4.2"},"children":[{"type":"Code","code":""}]},"showOnXs":true,"showOnSm":true,"showOnMd":true,"showOnLg":true,"showToMembers":true,"showToGuests":true,"showCondition":{"datamix":{"condition":"4.2"},"operator":"and","conditions":[]}}},"settings":{"handlers":"settings","vals":{"name":"HTML-компонент","html":"<div class=\"only-for-editor\"></div>\n<div class=\"filter-variable\">[[variable]]</div>","css":".filter-variable {\n  display: none;\n}\n\n.filter-variable p {\n  margin-bottom: 0;\n}\n\n.only-for-editor + .filter-variable {\n  display: block;\n}","meta_js":"const $select = $(el).find('.checkbox-list');\nconst columnid = params.columns;\nconst titleRows = params.title_rows;\nconst attrName = el.querySelector('.form-variable-slot').dataset.variable;\n\nconst searchField = (elem) => {\n  let attrField;\n\n  const fields = document.querySelectorAll(elem);\n\n  fields.forEach((field) => {\n    const attr = field.dataset.vals ? field.dataset.vals : '';\n    if (attr.search(`\"variable2\":\"${attrName}\"`) != -1) {\n      attrField = field;\n    }\n  });\n\n  attrField = attrField.closest('.cr-field');\n  attrField = page.getComponent(attrField);\n\n  return attrField;\n};\n\nArray.prototype.diff = function (a) {\n  return this.filter(function (i) {\n    return a.indexOf(i) < 0;\n  });\n};\n\nconst sortLabel = (value, item) => {\n  const $option = el.querySelectorAll('.label');\n  const activeLabel = [];\n  let notActiveLabel = [];\n  $option.forEach((label) => {\n    notActiveLabel.push(label);\n  });\n  $option.forEach((label) => {\n    const input = label.querySelector('input');\n    if (value.length !== 0) {\n      item.map((element) => {\n        if (label.dataset.itemText == element) {\n          activeLabel.push(label);\n        }\n      });\n    }\n  });\n\n  const res = notActiveLabel.diff(activeLabel);\n  \n  if (activeLabel.length !== 0) {\n    activeLabel.forEach((label) => {\n      const input = label.querySelector('input');\n      label.style.color = 'black';\n    });\n  }\n\n  if (res.length !== 0) {\n    res.forEach((label) => {\n      const input = label.querySelector('input');\n      label.style.color = 'gray';\n      $(input).prop('checked', false);\n    });\n  }\n};\n\nfunction filter(value) {\n  const elemRows = [];\n  if (value.length > 0) {\n    data.rows.forEach(function (item, index) {\n      value.map((itemsValue) => {\n        if (item[columnid] == itemsValue) {\n          elemRows.push(item[titleRows]);\n        }\n      });\n    });\n  }\n  if (elemRows.length != 0) {\n    sortLabel(value, elemRows);\n  } else {\n    sortLabel([]);\n  }\n}\nconst fieldSearch = searchField('.cr-field .metahtml');\n\nfilter(fieldSearch.value);\n\nfieldSearch.on('change', (e) => {\n  if (typeof fieldSearch.value == 'object') {\n    const newFilter = new Object(fieldSearch.value);\n    let result = [];\n    for (elem in newFilter) {\n      if (newFilter[elem]) {\n        result.push(elem);\n      }\n    }\n    if (result.length !== 0) {\n      filter(result);\n    } else {\n      filter(0);\n    }\n  } else {\n    filter(fieldSearch.value);\n  }\n});\n","meta_js_lazy":true,"meta_js_state":"return {\n  initialState: {},\n  eventListeners: {},\n  reset: function () {},\n};","encapsulation":true,"embeds":[{"name":"variable","type":"text"}],"meta_cdn":[""],"meta_cdn_sequentially":false,"tabs":[{"id":"main","name":"Главные"}],"variables":[{"macros":"columns","name":"Поле по которому происходит фильтр","showCondition":"","useInJs":true,"tab":"main","type":"queryfieldmany","value":["title"]},{"macros":"title_rows","name":"Поле таблицы который выводит имена переменных","showCondition":"","useInJs":true,"tab":"main","type":"queryfieldone","value":"f12"},{"macros":"info_1","name":"","showCondition":"","useInJs":false,"tab":"main","type":"info","message":"<b>Как работает</b>  <p>В строку под полем передается имя переменнойи после изменения значения  <br> в переменную попадает новое значение. Далее происходит поиск подходящих значений и поле становится активным </p>   <b>Как пользоваться</b>  <p>В нижнее поле где отображается красная переменная <br> нужно передать имя переменной по которой будет фильтр</p> <p>Важно! Поле может подвечиваться красным, но на опубликованной будет работать</p>  <b>По всем вопросам писать в телеграмм</b> <a href=\"https://t.me/olgalisenko1\">Написать</a>"}],"type":"checkbox-list","text":"Список галочек","hidename":true,"list":[{"text":"Гамбургер","image":{"datamix":{"img":"4.2"},"quality":8,"source":"upload","resize":true,"legacy_color":[0,1,0.5,1],"legacy_pack":"users","blur":{"enable":true,"size":16},"source_id":"","variable_id":"","file":"//i.1.creatium.io/plp/u6.plpstatic.ru/c16a5320fa475530d9583c34fd356ef5/85600fbdcfcd98c68092c8ee78fef443.jpg","size":[600,600]},"value":0,"name":"Вариант 1"},{"text":"Чай","image":{"datamix":{"img":"4.2"},"quality":8,"source":"upload","resize":true,"legacy_color":[0,1,0.5,1],"legacy_pack":"users","blur":{"enable":true,"size":16},"source_id":"","variable_id":"","file":"//i.1.creatium.io/plp/u6.plpstatic.ru/c16a5320fa475530d9583c34fd356ef5/d07611e14f2f6512eb82382ddb5812dd.jpg","size":[600,600]},"value":0,"name":"Вариант 2"},{"text":"Мороженное","image":{"datamix":{"img":"4.2"},"quality":8,"source":"upload","resize":true,"legacy_color":[0,1,0.5,1],"legacy_pack":"users","blur":{"enable":true,"size":16},"source_id":"","variable_id":"","file":"//i.1.creatium.io/plp/u6.plpstatic.ru/c16a5320fa475530d9583c34fd356ef5/ca0be5f5cd84b6891c5a611b252bc904.jpg","size":[600,600]},"value":0}],"list_column_text":"f12","list_column_image":null,"list_column_value":null,"visual_width":30,"visual_height":100,"required":false,"id":"","min":"0","max":"100","step":"1","align":"sides","fontsize":120,"typing":"string","format":"%result% руб.","file_text":"Прикрепить файл...","select_text":"Не выбрано","formula":"","condition":"","template":"","variable":"","valueOn":"1","valueOff":"0","variable2":"result","prefill_enable":false,"prefill":{"datamix":{"ast":"4.2"},"children":[]},"privacy_button":"Политика конфиденциальности","privacy_checkbox":"Даю согласие на <обработку персональных данных>","privacy_text":"Нажимая кнопку, вы даете согласие на <обработку персональных данных>","privacy_source":"/privacy","enable_query":true,"query_scheme":"v0.2"},"tabs":{"primary":"field","field":"field_metahtml","field_metahtml__soft":"field_metahtml__soft_main","field_metahtml__hard":"field_metahtml__hard_interface"},"toggles":{"field_metahtml":"hard"}},"state":{},"embeds":{"variable":{"datamix":{"html":"4.2"},"html":{"datamix":{"ast":"4.2"},"children":[{"type":"Variable","variable":{"target":"string","source":"variable-form","id":"idtitle"}}]},"tag":"p","lg":{"override":{"align":true,"font":true,"size":true,"intervals":true,"columns":true,"color":true},"align":"left","font":"font-text","size":14,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"md":{"override":{"align":false,"font":false,"size":false,"intervals":false,"columns":false,"color":false},"align":"left","font":"font-text","size":16,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"sm":{"override":{"align":false,"font":false,"size":false,"intervals":false,"columns":false,"color":false},"align":"left","font":"font-text","size":16,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"xs":{"override":{"align":false,"font":false,"size":false,"intervals":false,"columns":false,"color":false},"align":"left","font":"font-text","size":16,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"tplname":"text"}},"templates":{"cont":{"datamix":{"cont":"4.2"},"sources":[],"tplname":"cont"},"text":{"datamix":{"html":"4.2"},"html":{"datamix":{"ast":"4.2"},"children":[{"type":"Code","code":"<p>Редактируемый текст</p>"}]},"tag":"p","lg":{"override":{"align":true,"font":true,"size":true,"intervals":true,"columns":true,"color":true},"align":"left","font":"font-text","size":16,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"md":{"override":{"align":false,"font":false,"size":false,"intervals":false,"columns":false,"color":false},"align":"left","font":"font-text","size":16,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"sm":{"override":{"align":false,"font":false,"size":false,"intervals":false,"columns":false,"color":false},"align":"left","font":"font-text","size":16,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"xs":{"override":{"align":false,"font":false,"size":false,"intervals":false,"columns":false,"color":false},"align":"left","font":"font-text","size":16,"intervals":{"leading":1.4,"tracking":0},"columns":{"count":1,"gap":20},"color":{"datamix":{"color":"4.2"},"data":[0,0,0],"global":{"id":0,"transform":[["l","rel",0]]},"variable":{"source_id":"","id":"","transform":[],"basic":[1,1,0.5,1]},"source":"contrast","contrast":{"type":"frontcolor"},"inherit":false,"opacity":1}},"tplname":"text"},"icon":{"datamix":{"rawsvgicon":"4.2"},"handlers":"rawsvgicon","vals":{"src":{"datamix":{"icon":"4.2"},"file":"//static.creatium.io/svg/icons-thin/controls-33.svg","pack":"old-thin","size":[256,256],"svg":"<style type=\"text/css\"><![CDATA[ .st0{fill:none;stroke:#231F20;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;} ]]></style><polygon class=\"st0\" points=\"30.001,2.421 38.965,20.576 59,23.49 44.499,37.622 47.922,57.579 30.001,48.156 12.076,57.579 15.5,37.622 1,23.49 21.041,20.576 \"/>","folder":"all","style":"","viewbox":[0,0,60,60],"source":"upload"}},"tplname":"icon"},"image":{"datamix":{"rawimage":"4.2"},"handlers":"rawimage","vals":{"src":{"datamix":{"img":"4.2"},"quality":8,"source":"upload","resize":true,"legacy_color":[0,1,0.5,1],"legacy_pack":"users","blur":{"enable":true,"size":16},"source_id":"","variable_id":"","file":"//i.1.creatium.io/plp/u0.plpstatic.ru/63d3a6c9689d0a310bdb33ba48a9f341/194594eafe8a83db5eb472d202544c73.png","size":[477,500]}},"tplname":"image"}},"value":{"name":"","phone":"","password":"","email":"","count":"0","slider":"0","text":"","textarea":"","checkbox-input":false,"radio-list":[false,false,false],"radio-visual":[true,false,false],"checkbox-list":[false,false,false],"checkbox-visual":[false,false,false],"select-menu":[false,false,false],"hidden":"","hackable":"","result":0,"file":"","privacy-checkbox":false},"cont":{"datamix":{"cont":"4.2"},"sources":[]},"cells":{"query":{"select":"*","from":"62e26981919d26362d34487e","where":{"operator":"and","filters":[{"field":"f12","type":"is not empty","value":{"datamix":{"ast":"4.2"},"children":[]}}],"ignore_empty":true},"order":[],"limit":100,"limit_dev":20,"skip":0},"variable":"table"}},"multilandings":[],"variants":[],"virtualHeight":{"lg":224,"md":500,"sm":500,"xs":500},"redactor":"4.2","redactor_patch":5}
